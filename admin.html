<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Icomzy</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        /* 1. Basic Reset */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Inter', sans-serif;
    background-color: #faf8f6;
    color: #2d1f14;
    line-height: 1.6;
}

.container {
    max-width: 1280px;
    margin: 0 auto;
    padding: 0 16px;
}

/* 2. Header & Navigation */
header {
    border-bottom: 1px solid #e8e3dd;
    background-color: #ffffff;
    position: sticky;
    top: 0;
    z-index: 40;
}

.header-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 0;
}

.logo {
    display: flex;
    align-items: center;
    gap: 8px;
    text-decoration: none;
    color: inherit;
}

.logo-text h1 {
    font-size: 24px;
    font-weight: 700;
}

.logo-text p {
    font-size: 12px;
    color: #7f7f7f;
}

nav {
    display: flex;
    gap: 32px;
}

nav a {
    text-decoration: none;
    color: #2d1f14;
    font-weight: 500;
}

/* 3. Admin Main Content */
main {
    padding: 48px 0;
}

.admin-header {
    margin-bottom: 48px;
}

.admin-title-section {
    margin-bottom: 32px;
}

.admin-title-section h2 {
    font-size: 40px;
    font-weight: 700;
    margin-bottom: 16px;
}

.admin-title-section p {
    color: #7f7f7f;
    max-width: 600px;
}

/* 4. Top Bar & Buttons */
.admin-top-bar {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

@media (min-width: 768px) {
    .admin-top-bar {
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
    }
}

.add-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 12px 24px;
    background-color: #d84c3a;
    color: #ffffff;
    border: none;
    border-radius: 6px;
    font-weight: 600;
    cursor: pointer;
}

.search-bar {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 0 16px;
    width: 100%;
    height: 48px;
    background-color: #e8e3dd;
    border: 1px solid #e8e3dd;
    border-radius: 6px;
}

.search-bar input {
    flex: 1;
    border: none;
    background: none;
    outline: none;
    font-size: 16px;
}

/* 5. Stats Cards */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 16px;
    margin-bottom: 48px;
}

.stat-card {
    background-color: #ffffff;
    border: 1px solid #e8e3dd;
    border-radius: 6px;
    padding: 24px;
}

.stat-label {
    color: #7f7f7f;
    font-size: 14px;
    margin-bottom: 8px;
}

.stat-value {
    font-size: 32px;
    font-weight: 700;
    color: #c57736;
}

/* 6. Product Cards & Actions */
.products-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 32px;
}

.product-card {
    background-color: #ffffff;
    border: 1px solid #e8e3dd;
    border-radius: 6px;
    overflow: hidden;
}

.product-image-wrapper {
    width: 100%;
    height: 240px;
    background-color: #e8e3dd;
}

.product-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.product-info {
    padding: 16px;
}

.product-price {
    font-size: 20px;
    font-weight: 700;
    color: #c57736;
    margin-bottom: 8px;
}

.product-actions {
    display: flex;
    gap: 8px;
    margin-top: 16px;
}

.btn-edit {
    flex: 1;
    padding: 8px;
    background-color: #c57736;
    color: #ffffff;
    border: none;
    border-radius: 4px;
    font-weight: 600;
    cursor: pointer;
}

.btn-delete {
    flex: 1;
    padding: 8px;
    background-color: #ff4757;
    color: #ffffff;
    border: none;
    border-radius: 4px;
    font-weight: 600;
    cursor: pointer;
}

/* 7. Modal & Form */
.modal {
    display: none;
    position: fixed;
    inset: 0;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 50;
    align-items: center;
    justify-content: center;
    padding: 16px;
}

.modal.active {
    display: flex;
}

.modal-content {
    background-color: #ffffff;
    border-radius: 6px;
    max-width: 600px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
}

.modal-header {
    padding: 24px;
    border-bottom: 1px solid #e8e3dd;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.modal-body {
    padding: 24px;
}

.form-group {
    margin-bottom: 24px;
}

.form-group label {
    display: block;
    font-weight: 600;
    margin-bottom: 8px;
}

.form-group input, 
.form-group textarea, 
.form-group select {
    width: 100%;
    padding: 12px;
    border: 1px solid #e8e3dd;
    border-radius: 4px;
    background-color: #e8e3dd;
    font-size: 16px;
}

.form-actions {
    display: flex;
    gap: 16px;
    margin-top: 32px;
}

.btn-submit {
    flex: 1;
    padding: 12px;
    background-color: #c57736;
    color: #ffffff;
    border: none;
    border-radius: 6px;
}

.btn-cancel {
    flex: 1;
    padding: 12px;
    background-color: #e8e3dd;
    color: #2d1f14;
    border: none;
    border-radius: 6px;
}

/* 8. SVG Fixes */
svg {
    width: 20px;
    height: 20px;
    display: inline-block;
    vertical-align: middle;
    flex-shrink: 0;
}
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <a href="catalog.html" class="logo">
                    <svg style="width: 28px; height: 28px; color: var(--primary);" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="9" cy="21" r="1"></circle>
                        <circle cx="20" cy="21" r="1"></circle>
                        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                    </svg>
                    <div class="logo-text">
                        <h1>Icomzy</h1>
                        <p>Admin Panel</p>
                    </div>
                </a>
                <nav>
                    <a href="index.html">Catalog</a>
                    <a href="admin.html" style="font-weight: 600; color: var(--primary);">Admin</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">
        <div class="admin-header">
            <div class="admin-title-section">
                <h2>Product Management</h2>
                <p>Add, edit, or delete products in your catalog</p>
            </div>

            <div class="admin-top-bar">
                <div class="search-bar" style="flex: 1; max-width: 400px;">
                    <svg style="width: 20px; height: 20px; color: var(--muted-foreground);" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                    <input type="text" id="searchInput" placeholder="Search by name or category...">
                </div>
                <button class="add-btn" onclick="openAddForm()">
                    <span>➕</span>
                    Add New Product
                </button>
            </div>
        </div>

        <!-- Stats -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-label">Total Products</div>
                <div class="stat-value" id="totalProducts">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">In Stock</div>
                <div class="stat-value" id="inStockCount">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Categories</div>
                <div class="stat-value" id="categoriesCount">0</div>
            </div>
        </div>

        <!-- Products Grid -->
        <div class="products-grid" id="productsGrid">
            <!-- Products inserted by JavaScript -->
        </div>

        <!-- Empty State -->
        <div class="empty-state" id="emptyState" style="display: none;">
            <h3>No products found</h3>
            <p>Try adjusting your search or add your first product</p>
        </div>
    </main>

    <!-- Product Form Modal -->
    <div class="modal" id="formModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="formTitle">Add New Product</h2>
                <button class="close-btn" onclick="closeForm()">✕</button>
            </div>
            <div class="modal-body">
                <form id="productForm" onsubmit="handleSubmit(event)">
                    <div class="form-group">
                        <label for="name">Product Name *</label>
                        <input type="text" id="name" name="name" required placeholder="e.g., Modern Sofa Set">
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                        <div class="form-group">
                            <label for="price">Price *</label>
                            <input type="number" id="price" name="price" required placeholder="299" step="0.01" min="0">
                        </div>

                        <div class="form-group">
                            <label for="category">Category *</label>
                            <select id="category" name="category" required>
                                <option value="">Select a category</option>
                                <option value="sofas">Sofas</option>
                                <option value="tables">Tables</option>
                                <option value="chairs">Chairs</option>
                                <option value="beds">Beds</option>
                                <option value="desks">Desks</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="description">Description</label>
                        <textarea id="description" name="description" placeholder="Describe the product..."></textarea>
                    </div>

                    <div class="form-group">
                        <label for="image">Image URL</label>
                        <input type="url" id="image" name="image" placeholder="https://example.com/image.jpg">
                        <img id="imagePreview" class="image-preview" style="display: none;">
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                        <div class="form-group">
                            <label for="rating">Rating</label>
                            <input type="number" id="rating" name="rating" min="0" max="5" step="0.1" value="5">
                        </div>

                        <div class="form-group">
                            <label for="reviews">Reviews</label>
                            <input type="number" id="reviews" name="reviews" min="0" value="0">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="tags">Tags (comma-separated)</label>
                        <input type="text" id="tags" name="tags" placeholder="e.g., modern, comfort, premium">
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="inStock" name="inStock" checked>
                            <span>In Stock</span>
                        </label>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn-submit" id="submitBtn">Add Product</button>
                        <button type="button" class="btn-cancel" onclick="closeForm()">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        const STORAGE_KEY = 'furniture_products';

        const DEFAULT_PRODUCTS = [
            {
                id: "1",
                name: "Modern Sofa Set",
                price: 1299,
                category: "sofas",
                description: "A sleek and comfortable modern sofa set with premium fabric upholstery.",
                image: "https://images.unsplash.com/photo-1555041469-a586c61ea9bc?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=500&q=60",
                inStock: true,
                rating: 4.8,
                reviews: 142,
                tags: ["modern", "comfort", "premium"],
            },
            {
                id: "2",
                name: "Dining Table Oak",
                price: 549,
                category: "tables",
                description: "Handcrafted oak dining table seats 6. Beautiful wood grain finish.",
                image: "https://images.unsplash.com/photo-1589535255042-88799bb1b20b?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTl8fG9hayUyMHRhYmxlfGVufDB8fDB8fHww",
                inStock: true,
                rating: 4.6,
                reviews: 89,
                tags: ["wood", "elegant", "durable"],
            },
            {
                id: "3",
                name: "Lounge Chair",
                price: 399,
                category: "chairs",
                description: "Ergonomic lounge chair with memory foam. Perfect for reading and relaxation.",
                image: "https://images.unsplash.com/photo-1592078615290-033ee584e267?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=500&q=60",
                inStock: true,
                rating: 4.7,
                reviews: 203,
                tags: ["ergonomic", "comfort", "premium"],
            },
            {
                id: "4",
                name: "Bed Frame King Size",
                price: 799,
                category: "beds",
                description: "Solid wood king size bed frame with storage drawers underneath.",
                image: "https://plus.unsplash.com/premium_photo-1674326699094-55c656af9867?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8QmVkJTIwRnJhbWUlMjBLaW5nJTIwU2l6ZXxlbnwwfHwwfHx8MA%3D%3D",
                inStock: true,
                rating: 4.5,
                reviews: 156,
                tags: ["spacious", "storage", "quality"],
            },
            {
                id: "5",
                name: "Coffee Table Walnut",
                price: 299,
                category: "tables",
                description: "Modern coffee table with walnut finish and tempered glass top.",
                image: "https://plus.unsplash.com/premium_photo-1711391585226-45a983eb8e70?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NXx8Q29mZmVlJTIwVGFibGV8ZW58MHx8MHx8fDA%3D",
                inStock: true,
                rating: 4.4,
                reviews: 67,
                tags: ["modern", "stylish", "glass"],
            },
            {
                id: "6",
                name: "Office Desk",
                price: 349,
                category: "desks",
                description: "Spacious office desk with cable management and adjustable height.",
                image: "https://images.unsplash.com/photo-1589362281138-e3f7ebe47f1a?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8N3x8T2ZmaWNlJTIwRGVza3xlbnwwfHwwfHx8MA%3D%3D",
                inStock: true,
                rating: 4.6,
                reviews: 98,
                tags: ["functional", "ergonomic", "work"],
            },
        ];

        let currentEditingId = null;

        // Storage functions
        function getProducts() {
            const stored = localStorage.getItem(STORAGE_KEY);
            if (!stored) {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(DEFAULT_PRODUCTS));
                return DEFAULT_PRODUCTS;
            }
            return JSON.parse(stored);
        }

        function saveProducts(products) {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(products));
        }

        function getCategories() {
            const products = getProducts();
            const categories = new Set(products.map(p => p.category));
            return Array.from(categories);
        }

        // Render functions
        function renderProducts() {
            const products = getProducts();
            const searchQuery = document.getElementById("searchInput").value.toLowerCase();

            const filtered = products.filter(p =>
                p.name.toLowerCase().includes(searchQuery) ||
                p.category.toLowerCase().includes(searchQuery)
            );

            const grid = document.getElementById("productsGrid");
            const emptyState = document.getElementById("emptyState");

            if (filtered.length === 0) {
                grid.innerHTML = "";
                emptyState.style.display = "block";
                updateStats();
                return;
            }

            emptyState.style.display = "none";

            grid.innerHTML = filtered.map(product => `
                <div class="product-card">
                    <div class="product-image-wrapper">
                        <img src="${product.image}" alt="${product.name}" class="product-image" onerror="this.src='https://via.placeholder.com/500x400?text=Product'">
                    </div>
                    <div class="product-info">
                        <h3 class="product-name">${product.name}</h3>
                        <div class="product-price">₹${product.price*10}</div>
                        <span class="product-category">${product.category}</span>
                        <div class="product-actions">
                            <button class="btn-edit" onclick="editProduct('${product.id}')">Edit</button>
                            <button class="btn-delete" onclick="deleteProduct('${product.id}')">Delete</button>
                        </div>
                    </div>
                </div>
            `).join("");

            updateStats();
        }

        function updateStats() {
            const products = getProducts();
            document.getElementById("totalProducts").textContent = products.length;
            document.getElementById("inStockCount").textContent = products.filter(p => p.inStock).length;
            document.getElementById("categoriesCount").textContent = new Set(products.map(p => p.category)).size;
        }

        // Form functions
        function openAddForm() {
            currentEditingId = null;
            document.getElementById("formTitle").textContent = "Add New Product";
            document.getElementById("submitBtn").textContent = "Add Product";
            document.getElementById("productForm").reset();
            document.getElementById("imagePreview").style.display = "none";
            document.getElementById("formModal").classList.add("active");
        }

        function editProduct(id) {
            const products = getProducts();
            const product = products.find(p => p.id === id);
            if (!product) return;

            currentEditingId = id;
            document.getElementById("formTitle").textContent = "Edit Product";
            document.getElementById("submitBtn").textContent = "Update Product";

            document.getElementById("name").value = product.name;
            document.getElementById("price").value = product.price;
            document.getElementById("category").value = product.category;
            document.getElementById("description").value = product.description;
            document.getElementById("image").value = product.image;
            document.getElementById("rating").value = product.rating;
            document.getElementById("reviews").value = product.reviews;
            document.getElementById("tags").value = product.tags.join(", ");
            document.getElementById("inStock").checked = product.inStock;

            if (product.image) {
                const preview = document.getElementById("imagePreview");
                preview.src = product.image;
                preview.style.display = "block";
            }

            document.getElementById("formModal").classList.add("active");
        }

        function closeForm() {
            document.getElementById("formModal").classList.remove("active");
            currentEditingId = null;
            document.getElementById("productForm").reset();
        }

        function deleteProduct(id) {
            if (!confirm("Are you sure you want to delete this product?")) return;

            const products = getProducts();
            const filtered = products.filter(p => p.id !== id);
            saveProducts(filtered);
            renderProducts();
        }

        function handleSubmit(e) {
            e.preventDefault();

            const formData = {
                name: document.getElementById("name").value,
                price: parseFloat(document.getElementById("price").value),
                category: document.getElementById("category").value,
                description: document.getElementById("description").value,
                image: document.getElementById("image").value,
                rating: parseFloat(document.getElementById("rating").value),
                reviews: parseInt(document.getElementById("reviews").value),
                tags: document.getElementById("tags").value.split(",").map(t => t.trim()).filter(t => t),
                inStock: document.getElementById("inStock").checked,
            };

            if (!formData.name || !formData.price || !formData.category) {
                alert("Please fill in all required fields");
                return;
            }

            const products = getProducts();

            if (currentEditingId) {
                const index = products.findIndex(p => p.id === currentEditingId);
                if (index !== -1) {
                    products[index] = { ...products[index], ...formData };
                }
            } else {
                products.push({
                    ...formData,
                    id: Date.now().toString(),
                });
            }

            saveProducts(products);
            renderProducts();
            closeForm();
        }

        // Image preview
        document.getElementById("image").addEventListener("change", (e) => {
            const preview = document.getElementById("imagePreview");
            if (e.target.value) {
                preview.src = e.target.value;
                preview.style.display = "block";
            } else {
                preview.style.display = "none";
            }
        });

        // Search
        document.getElementById("searchInput").addEventListener("input", renderProducts);

        // Initial render
        window.addEventListener('load', renderProducts);
    </script>
</body>
</html>
